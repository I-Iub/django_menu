## Запуск проекта

Клонируйте проект в целевую папку.
```
git clone https://github.com/I-Iub/django_menu.git
```

Перейдите в папку с проектом. Создайте файл `.env` и переменную `SECRET_KEY`
в нём.
```
cd django_menu
echo SECRET_KEY=abc123#@$ > .env
```

Создайте виртуальное окружение и активируйте его.
```
python3 -m venv venv
. venv/bin/activate  # Linux
```

Установите зависимости
```
pip install --upgrade pip
pip install -r requirements.txt
```
Перейдите в папку django_menu (в ней есть файл manage.py)
```
cd django_menu
```
Запустите сервер разработчика
```
python manage.py runserver
```

## Создание меню

Тестовая база данных с небольшим количеством записей для демонстрации работы 
находится в репозитории, поэтому сразу можно увидеть имеющиеся меню.
Откройте в браузере страницу [http://127.0.0.1:8000/menu/](http://127.0.0.1:8000/menu/). 
Наибольшая глубина в `Меню 1` в подпункте `с потомками 1 ...`

Для того чтобы открыть "админку", перейдите по адресу 
[http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/). 
В открывшейся форме введите "Имя пользователя"
`admin` и "Пароль" `admin`. Для редактирования меню откройте "Список меню".

Для того чтобы создать новое меню в каком-либо шаблоне, нужно в этом шаблоне 
добавить `{% include "menu/<наименование шаблона для нового меню>" %}`. См. 
[пример](https://github.com/I-Iub/django_menu/blob/main/django_menu/templates/base.html#L13).
В папке `django_menu/django_menu/templates/menu/` создать новый шаблон с таким 
именем. Содержимое должно быть таким:
```
{% load tags %}

{% draw_menu 'empty_menu' as empty_menu %}
{{ empty_menu|safe }}
```
Здесь 'empty_menu' в кавычках должно совпадать с названием, которое будет 
записываться в поле `Слаг для меню` через форму в административной панели. 
Имена переменных в части `as empty_menu %}` `{{ empty_menu|safe }}` (`empty_menu`)
должны совпадать.
Т.о. если создать через админку новый пункт меню, указав в поле 
"Слаг для меню" значение `empty_menu`, то на странице 
[http://127.0.0.1:8000/menu/](http://127.0.0.1:8000/menu/)
появится третье, новое меню.

Топология меню задаётся с помощью "пути", который указывается в поле "Путь" 
формы создания меню в административной панели. Путь состоит из группы знаков, по
которым происходить сортировка в пределах одного уровня вложенности и разделителя: `-`.
Например: 100-200-300. Здесь 100 -- число, определяющее порядок пункта меню
относительно других на первом уровне вложенности, 200 -- на втором и т.д.
Т.е. пункт меню с путем 100-200-400 будет ниже приведённого примера, а 
с путём 100-200-200 -- выше. 
При создании пункта меню проверяется корректность введённых данных. Например, 
 нельзя создать пункт меню с путём 100-200-300, если для него не существует 
"родительских" пунктов с путями 100 и 100-200.
